apiVersion: v1
kind: Secret
metadata:
  name: {{ include "banking-platform.fullname" . }}-jwt
  labels:
    {{- include "banking-platform.labels" . | nindent 4 }}
type: Opaque
data:
  secret-key: {{ .Values.config.jwt.secretKey | b64enc | quote }}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "banking-platform.fullname" . }}-database
  labels:
    {{- include "banking-platform.labels" . | nindent 4 }}
type: Opaque
data:
  connection-string: {{ include "banking-platform.databaseConnectionString" (dict "database" .Values.config.database.accountsDb "Values" .Values) | b64enc | quote }}
  accounts-connection-string: {{ include "banking-platform.databaseConnectionString" (dict "database" .Values.config.database.accountsDb "Values" .Values) | b64enc | quote }}
  transactions-connection-string: {{ include "banking-platform.databaseConnectionString" (dict "database" .Values.config.database.transactionsDb "Values" .Values) | b64enc | quote }}
  payments-connection-string: {{ include "banking-platform.databaseConnectionString" (dict "database" .Values.config.database.paymentsDb "Values" .Values) | b64enc | quote }}
  notifications-connection-string: {{ include "banking-platform.databaseConnectionString" (dict "database" .Values.config.database.notificationsDb "Values" .Values) | b64enc | quote }}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "banking-platform.fullname" . }}-servicebus
  labels:
    {{- include "banking-platform.labels" . | nindent 4 }}
type: Opaque
data:
  connection-string: {{ .Values.config.services.azureServiceBus.connectionString | b64enc | quote }}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "banking-platform.fullname" . }}-external-services
  labels:
    {{- include "banking-platform.labels" . | nindent 4 }}
type: Opaque
data:
  sendgrid-api-key: {{ .Values.config.services.sendGrid.apiKey | b64enc | quote }}
  twilio-account-sid: {{ .Values.config.services.twilio.accountSid | b64enc | quote }}
  twilio-auth-token: {{ .Values.config.services.twilio.authToken | b64enc | quote }}
  firebase-server-key: {{ .Values.config.services.firebase.serverKey | b64enc | quote }}